<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{fragments/resources :: headTags}"></head>
    <body>
        
        <nav th:replace="~{fragments/navbar :: navbar('vehicles')}"></nav>

        <div class="container mt-5">
            <div class="row justify-content-center">
                <div class="col-md-6">
                    <h1 class="mb-4" th:text="${edit} ? 'Modifica il veicolo' : 'Crea un nuovo veicolo'">Crea o Modifica Veicolo</h1> 
                    
                    <form id="vehicle-form" th:object="${vehicle}" 
                        th:action="${edit} ? @{/vehicles/edit/{id}(id=${vehicle.id})} : @{/vehicles/create}" 
                        method="post">

                        <div class="mb-2">
                            <label for="type" class="form-label">Tipo di veicolo</label>
                            <input type="text" class="form-control" id="type" th:field="*{type}" 
                                th:errorClass="is-invalid" placeholder="Es. Auto, Moto, Furgone">
                            <div th:if="${#fields.hasErrors('type')}" class="invalid-feedback">
                                <ul>
                                    <li th:each="err:${#fields.errors('type')}" th:text="${err}"></li>
                                </ul>
                            </div>
                        </div>

                        <div class="mb-2">
                            <label for="brand" class="form-label">Marca</label>
                            <input type="text" class="form-control" id="brand" th:field="*{brand}" 
                                th:errorClass="is-invalid" placeholder="Es. Fiat, Ford, Yamaha">
                            <div th:if="${#fields.hasErrors('brand')}" class="invalid-feedback">
                                <ul>
                                    <li th:each="err:${#fields.errors('brand')}" th:text="${err}"></li>
                                </ul>
                            </div>
                        </div>

                        <div class="mb-2">
                            <label for="model" class="form-label">Modello</label>
                            <input type="text" class="form-control" id="model" th:field="*{model}" 
                                th:errorClass="is-invalid" placeholder="Es. Panda, Duster, MT-07">
                            <div th:if="${#fields.hasErrors('model')}" class="invalid-feedback">
                                <ul>
                                    <li th:each="err:${#fields.errors('model')}" th:text="${err}"></li>
                                </ul>
                            </div>
                        </div>

                        <div class="mb-2">
                            <label for="year" class="form-label">Anno</label>
                            <input type="number" class="form-control" id="year" th:field="*{year}" 
                                th:errorClass="is-invalid" placeholder="Es. 2023">
                            <div th:if="${#fields.hasErrors('year')}" class="invalid-feedback">
                                <ul>
                                    <li th:each="err:${#fields.errors('year')}" th:text="${err}"></li>
                                </ul>
                            </div>
                        </div>

                        <div class="mb-2">
                            <label for="engineCapacity" class="form-label">Cilindrata (cc)</label>
                            <input type="number" class="form-control" id="engineCapacity" th:field="*{engineCapacity}" 
                                th:errorClass="is-invalid" placeholder="Es. 1200, 1500, 689">
                            <div th:if="${#fields.hasErrors('engineCapacity')}" class="invalid-feedback">
                                <ul>
                                    <li th:each="err:${#fields.errors('engineCapacity')}" th:text="${err}"></li>
                                </ul>
                            </div>
                        </div>

                        <div class="mb-2">
                            <label for="fuel" class="form-label">Alimentazione</label>
                            <input type="text" class="form-control" id="fuel" th:field="*{fuel}" 
                                th:errorClass="is-invalid" placeholder="Es. Benzina, Diesel, Ibrido">
                            <div th:if="${#fields.hasErrors('fuel')}" class="invalid-feedback">
                                <ul>
                                    <li th:each="err:${#fields.errors('fuel')}" th:text="${err}"></li>
                                </ul>
                            </div>
                        </div>

                        <div class="mb-2">
                            <label for="basePrice" class="form-label">Prezzo base (â‚¬)</label>
                            <input type="number" class="form-control" id="basePrice" th:field="*{basePrice}" 
                                th:errorClass="is-invalid" step="0.01" placeholder="Es. 12000">
                            <div th:if="${#fields.hasErrors('basePrice')}" class="invalid-feedback">
                                <ul>
                                    <li th:each="err:${#fields.errors('basePrice')}" th:text="${err}"></li>
                                </ul>
                            </div>
                        </div>

                        <div class="d-flex justify-content-center gap-3 mt-3">
                            <input type="submit" value="Salva" class="btn btn-outline-primary">
                            <input type="reset" value="Reset campi" class="btn btn-outline-warning">
                        </div>

                    </form>
                </div>
            </div>
        </div>

        <div th:replace="~{fragments/resources :: goBackButton}"></div>
        <div th:replace="~{fragments/resources :: scripts}"></div>
    </body>
</html>
